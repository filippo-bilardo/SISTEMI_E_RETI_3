# Configurazione OpenVPN Server
# File: /etc/openvpn/server.conf
# Riferimento Prova: Configurazione accesso VPN remoto

# Porta e protocollo
port 1194
proto udp

# Device
dev tun

# Certificati e chiavi
ca ca.crt
cert server.crt
key server.key
dh dh2048.pem
tls-auth ta.key 0

# Rete VPN
server 172.16.20.0 255.255.255.192
topology subnet

# Route per LAN interna
push "route 172.16.0.0 255.255.0.0"
push "dhcp-option DNS 172.16.2.10"
push "dhcp-option DOMAIN azienda.local"

# Parametri di sicurezza
cipher AES-256-CBC
auth SHA256
tls-version-min 1.2

# Compressione
compress lz4-v2
push "compress lz4-v2"

# Utente non privilegiato
user nobody
group nogroup

# Persistenza
persist-key
persist-tun

# Log
status /var/log/openvpn-status.log
log-append /var/log/openvpn.log
verb 3

# Keepalive
keepalive 10 120

# Numero massimo client
max-clients 50
